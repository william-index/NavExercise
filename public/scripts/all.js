!function(){function a(a){return document.querySelector(a)}var b=function(){function b(b){this.menu=a(b)}return b.prototype.toggle_open=function(){var b=this.menu.parentNode;b.classList.toggle("open"),b.querySelector(".burger_menu").classList.toggle("open"),a(".content_wrapper").classList.toggle("open"),a(".main_menu__blocker--small").classList.toggle("open")},b.prototype.toggle_sub=function(b){_classList=b.classList,_classList.contains("open")?(this.close_all_subs(),a(".main_menu__blocker--large").classList.remove("open")):(this.close_all_subs(),_classList.add("open"),a(".main_menu__blocker--large").classList.add("open"))},b.prototype.close_all_subs=function(b){_$subs=this.menu.querySelectorAll(".main_menu__sub_menu"),a(".main_menu__blocker--large").classList.remove("open");for(var c=0;c<_$subs.length;c++)_$subs[c].classList.remove("open")},b}(),c=function(){function a(a,b){this.api_str=a,this.$parent_node=document.querySelector(b),this.retrieve_menu()}return a.prototype.retrieve_menu=function(){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(_menu_data=JSON.parse(a.responseText),this.build_menu(_menu_data))}.bind(this),a.open("GET",this.api_str,!0),a.send()},a.prototype.build_menu=function(a){var b=document.createElement("DIV");a.items.forEach(function(a){a=this.prep_menu_section(a),b.appendChild(a)}.bind(this)),this.$parent_node.appendChild(b)},a.prototype.prep_menu_section=function(a){var b;if(0!==a.items.length){var c=this.create_menu_item(a,"main_menu__link main_menu__link--main");b=document.createElement("nav"),b.setAttribute("role","menu"),b.setAttribute("aria-haspopup","true"),b.setAttribute("class","main_menu__sub_menu"),b.appendChild(c);var d=document.createElement("div");a.items.forEach(function(a){a=this.create_menu_item(a,"main_menu__link main_menu__link--sub"),d.appendChild(a)}.bind(this)),b.appendChild(d)}else b=this.create_menu_item(a,"main_menu__link main_menu__link--main");return b},a.prototype.create_menu_item=function(a,b){var c=document.createElement("a");return c.setAttribute("role","menuitem"),c.setAttribute("href",a.url),c.setAttribute("class",b),c.innerHTML=a.label,c},a}(),d=new b(".main_menu");new c("/api/nav.json",".main_menu");a(".main_header__burger").addEventListener("click",function(b){b.preventDefault(),a(".site_footer").classList.toggle("open"),d.toggle_open()}),a(".main_menu__blocker--small").addEventListener("click",function(a){d.toggle_open(),d.close_all_subs()}),a(".main_menu__blocker--large").addEventListener("click",function(a){d.close_all_subs()}),a(".main_menu").addEventListener("click",function(a){_parent=a.target.parentNode,_has_subs=_parent.classList.contains("main_menu__sub_menu"),_is_sub=a.target.classList.contains("main_menu__link--sub"),_has_subs&&!_is_sub&&(a.preventDefault(),d.toggle_sub(_parent))})}();